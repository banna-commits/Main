# 2026-02-22 (Sunday)

## Mission Control â†’ Next.js Migration
- Migrated taskboard.html (701 lines) to Next.js 15 app at `mission-control/`
- Stack: Next.js 16.1.6 + TypeScript + Tailwind v4 + App Router
- Sub-agent timed out after 5m but created project, API routes, types, 5/6 components
- Finished MemoryTab + page.tsx wiring manually
- Build passes clean (`npm run build` âœ“)
- Node v24 issue: Next.js says "Ready" but never listens â€” had to install Node v22 via fnm
- Actually the node version wasn't the issue â€” OpenClaw exec sandbox kills child processes
- Solution: `nohup` for manual runs, launchd for persistence
- Launchd service: `com.openclaw.missioncontrol` on port 3000
- Updated Chrome bookmark to point to localhost:3000

## Melissa's Birthday Reminder
- Sent Telegram reminder about Melissa's birthday (Feb 23)
- Knut confirmed flowers already ordered
- Added "ðŸŽ‚ Melissas bursdag" to AutoCalendar for Feb 23

## Gmail OAuth Expired
- `gog gmail search` returns "Token has been expired or revoked"
- Needs re-auth: `gog auth add bottenanna26@gmail.com --services gmail,calendar,...`
- Requires Knut's browser for OAuth consent

## Memory System Overhaul (afternoon session)
- **Local embeddings:** Switched from Gemini (429 quota errors) to nomic-embed-text via Ollama OpenAI-compat API
- **Hybrid search:** Enabled BM25 + vector (70/30) â€” was already built into OpenClaw, just needed config toggle
- **Importance scoring:** Heuristic-based (keywords: decisions, people, money, actions), 88 sections scored instantly. LLM-per-section approach failed (qwen3-fast ignores /no_think, hangs with stream:false)
- **Context index:** 311 topics mapped to file/line refs (build-context-index.py)
- **Relations graph:** 20 entities, 14 edges (build-relations.py)
- **Decay pipeline:** memory-consolidate.sh + memory-decay.py â€” compresses 7-30dâ†’weekly, archives >30d
- **All integrated into Infra Sync cron** (6 scripts every 6h)

## Self-Monitoring Suite
- **Cron Circuit Breaker** â€” auto-disables jobs with 3+ consecutive failures, alerts Telegram (kl 06/12/18)
- **Memory Integrity** â€” hash-based detection of corruption, bloat, missing files
- **Tool Health** â€” 6 smoke tests: Ollama, gog, web, memory index, git (all PASS)
- **Contradiction Detection** â€” finds stale paths, email conflicts, duplicate sections (found 10 issues)
- **Daily Self-Test cron** â€” runs all above at 05:00

## Subagent Fix
- Subagents kept timing out (90s too short, inheriting Opus)
- Fix: config `agents.defaults.subagents.model` â†’ Sonnet, timeout 300s for complex tasks
- Atomic task prompts + "then stop" = reliable completions
- Parallel spawning works (3 research agents simultaneously, all delivered)
- Pattern saved: memory/patterns/subagent-spawning.md

## Ollama Tuning
- Mac Mini M4 24GB RAM
- OLLAMA_NUM_PARALLEL=2, KEEP_ALIVE=30m, flash attention, q8 KV cache
- qwen3-fast context: 4Kâ†’32K, maxTokens: 1Kâ†’8K (plenty of headroom)
- Warmup plist updated: loads nomic-embed-text + qwen3-fast on boot
- Model routing pattern saved: memory/patterns/model-routing.md

## Discord Setup
- Bot @Bannabot live on server 1475147053549228032
- Channels: mainchat + mainforum (allowlisted, mention-only)
- Knut created Discord server + invited friends for AI project collaboration

## Calendar
- 9 barnehage-events added to AutoCalendar (karnevalâ†’sommerstengt)
- Lesson learned: gog calendar needs timezone in ISO format, exclusive end dates

## Other
- Sent memory-system-guide.md to knutgreiner@gmail.com
- pdftotext installed (poppler) for PDF reading
- Mission Control calendar now has clickable days with detail panel
- OpenClaw update failed: npm cache has root-owned files, needs `sudo chown -R`
- Preference added: auto-save lessons without asking
# Backup test Sun Feb 22 19:09:13 CET 2026
